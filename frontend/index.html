<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8" />
    <title>OCR klient</title>
</head>
<body>
    <h1>OCR klient</h1>
    <input type="file" id="fileInput" accept="image/*" />
    <button id="sendBtn">Odoslať na OCR</button>
    <h2>Výsledok OCR:</h2>
    <pre id="result"></pre>

    <script>
        const fileInput = document.getElementById('fileInput');
        const sendBtn = document.getElementById('sendBtn');
        const resultEl = document.getElementById('result');

        sendBtn.onclick = () => {
            const file = fileInput.files[0];
            if (!file) {
                alert("Vyber súbor!");
                return;
            }

            const reader = new FileReader();
            reader.onload = function() {
                fetch('ocr', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/octet-stream'
                    },
                    body: reader.result
                })
                .then(response => response.text())
                .then(text => {
                    resultEl.textContent = text;
                })
                .catch(err => {
                    resultEl.textContent = "Chyba: " + err;
                });
            };
            reader.readAsArrayBuffer(file);
        };
    </script>
</body>
</html>
